!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).ieBundle=n()}(this,function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){i(t,n,e[n])})}return t}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,n){return(s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function c(t,n,e){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=a(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(e):i.value}})(t,n,e||t)}function f(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function h(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=new WeakMap,d=function(t){return"function"==typeof t&&p.has(t)},v=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,g=function(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n;r!==e;){var i=r.nextSibling;t.removeChild(r),r=i}},m={},y={},_="{{lit-".concat(String(Math.random()).slice(2),"}}"),w="\x3c!--".concat(_,"--\x3e"),b=new RegExp("".concat(_,"|").concat(w)),x=function t(e,r){var i=this;n(this,t),this.parts=[],this.element=r;var o=-1,u=0,a=[];!function t(n){for(var r=n.content,s=document.createTreeWalker(r,133,null,!1),l=0;s.nextNode();){o++;var c=s.currentNode;if(1===c.nodeType){if(c.hasAttributes()){for(var f=c.attributes,h=0,p=0;p<f.length;p++)f[p].value.indexOf(_)>=0&&h++;for(;h-- >0;){var d=e.strings[u],v=S.exec(d)[2],g=v.toLowerCase()+"$lit$",m=c.getAttribute(g).split(b);i.parts.push({type:"attribute",index:o,name:v,strings:m}),c.removeAttribute(g),u+=m.length-1}}"TEMPLATE"===c.tagName&&t(c)}else if(3===c.nodeType){var y=c.data;if(y.indexOf(_)>=0){for(var w=c.parentNode,x=y.split(b),E=x.length-1,k=0;k<E;k++)w.insertBefore(""===x[k]?N():document.createTextNode(x[k]),c),i.parts.push({type:"node",index:++o});""===x[E]?(w.insertBefore(N(),c),a.push(c)):c.data=x[E],u+=E}}else if(8===c.nodeType)if(c.data===_){var A=c.parentNode;null!==c.previousSibling&&o!==l||(o++,A.insertBefore(N(),c)),l=o,i.parts.push({type:"node",index:o}),null===c.nextSibling?c.data="":(a.push(c),o--),u++}else for(var M=-1;-1!==(M=c.data.indexOf(_,M+1));)i.parts.push({type:"node",index:-1})}}(r);for(var s=0;s<a.length;s++){var l=a[s];l.parentNode.removeChild(l)}},E=function(t){return-1!==t.index},N=function(){return document.createComment("")},S=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,k=function(){function t(e,r,i){n(this,t),this._parts=[],this.template=e,this.processor=r,this.options=i}return r(t,[{key:"update",value:function(t){var n=0,e=!0,r=!1,i=void 0;try{for(var o,u=this._parts[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var a=o.value;void 0!==a&&a.setValue(t[n]),n++}}catch(t){r=!0,i=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}var s=!0,l=!1,c=void 0;try{for(var f,h=this._parts[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;void 0!==p&&p.commit()}}catch(t){l=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}},{key:"_clone",value:function(){var t=this,n=v?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts,r=0,i=0;return function n(o){for(var u=document.createTreeWalker(o,133,null,!1),a=u.nextNode();r<e.length&&null!==a;){var s=e[r];if(E(s))if(i===s.index){if("node"===s.type){var l=t.processor.handleTextExpression(t.options);l.insertAfterNode(a.previousSibling),t._parts.push(l)}else{var c;(c=t._parts).push.apply(c,h(t.processor.handleAttributeExpressions(a,s.name,s.strings,t.options)))}r++}else i++,"TEMPLATE"===a.nodeName&&n(a.content),a=u.nextNode();else t._parts.push(void 0),r++}}(n),v&&(document.adoptNode(n),customElements.upgrade(n)),n}}]),t}(),A=function(){function t(e,r,i,o){n(this,t),this.strings=e,this.values=r,this.type=i,this.processor=o}return r(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,n="",e=0;e<t;e++){var r=this.strings[e],i=S.exec(r);n+=i?r.substr(0,i.index)+i[1]+i[2]+"$lit$"+i[3]+_:r+w}return n+this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}(),M=function(t){function e(){return n(this,e),l(this,a(e).apply(this,arguments))}return u(e,A),r(e,[{key:"getHTML",value:function(){return"<svg>".concat(c(a(e.prototype),"getHTML",this).call(this),"</svg>")}},{key:"getTemplateElement",value:function(){var t=c(a(e.prototype),"getTemplateElement",this).call(this),n=t.content,r=n.firstChild;return n.removeChild(r),function(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=n;i!==e;){var o=i.nextSibling;t.insertBefore(i,r),i=o}}(n,r.firstChild),t}}]),e}(),P=function(n){return null===n||!("object"===t(n)||"function"==typeof n)},T=function(){function t(e,r,i){n(this,t),this.dirty=!0,this.element=e,this.name=r,this.strings=i,this.parts=[];for(var o=0;o<i.length-1;o++)this.parts[o]=this._createPart()}return r(t,[{key:"_createPart",value:function(){return new O(this)}},{key:"_getValue",value:function(){for(var t=this.strings,n=t.length-1,e="",r=0;r<n;r++){e+=t[r];var i=this.parts[r];if(void 0!==i){var o=i.value;if(null!=o&&(Array.isArray(o)||"string"!=typeof o&&o[Symbol.iterator])){var u=!0,a=!1,s=void 0;try{for(var l,c=o[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){var f=l.value;e+="string"==typeof f?f:String(f)}}catch(t){a=!0,s=t}finally{try{u||null==c.return||c.return()}finally{if(a)throw s}}}else e+="string"==typeof o?o:String(o)}}return e+=t[n]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}(),O=function(){function t(e){n(this,t),this.value=void 0,this.committer=e}return r(t,[{key:"setValue",value:function(t){t===m||P(t)&&t===this.value||(this.value=t,d(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;d(this.value);){var t=this.value;this.value=m,t(this)}this.value!==m&&this.committer.commit()}}]),t}(),I=function(){function t(e){n(this,t),this.value=void 0,this._pendingValue=void 0,this.options=e}return r(t,[{key:"appendInto",value:function(t){this.startNode=t.appendChild(N()),this.endNode=t.appendChild(N())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t._insert(this.startNode=N()),t._insert(this.endNode=N())}},{key:"insertAfterPart",value:function(t){t._insert(this.startNode=N()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;d(this._pendingValue);){var t=this._pendingValue;this._pendingValue=m,t(this)}var n=this._pendingValue;n!==m&&(P(n)?n!==this.value&&this._commitText(n):n instanceof A?this._commitTemplateResult(n):n instanceof Node?this._commitNode(n):Array.isArray(n)||n[Symbol.iterator]?this._commitIterable(n):n===y?(this.value=y,this.clear()):this._commitText(n))}},{key:"_insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"_commitNode",value:function(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}},{key:"_commitText",value:function(t){var n=this.startNode.nextSibling;t=null==t?"":t,n===this.endNode.previousSibling&&3===n.nodeType?n.data=t:this._commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}},{key:"_commitTemplateResult",value:function(t){var n=this.options.templateFactory(t);if(this.value instanceof k&&this.value.template===n)this.value.update(t.values);else{var e=new k(n,t.processor,this.options),r=e._clone();e.update(t.values),this._commitNode(r),this.value=e}}},{key:"_commitIterable",value:function(n){Array.isArray(this.value)||(this.value=[],this.clear());var e,r=this.value,i=0,o=!0,u=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;void 0===(e=r[i])&&(e=new t(this.options),r.push(e),0===i?e.appendIntoPart(this):e.insertAfterPart(r[i-1])),e.setValue(c),e.commit(),i++}}catch(t){u=!0,a=t}finally{try{o||null==l.return||l.return()}finally{if(u)throw a}}i<r.length&&(r.length=i,this.clear(e&&e.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;g(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),V=function(){function t(e,r,i){if(n(this,t),this.value=void 0,this._pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=r,this.strings=i}return r(t,[{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;d(this._pendingValue);){var t=this._pendingValue;this._pendingValue=m,t(this)}if(this._pendingValue!==m){var n=!!this._pendingValue;this.value!==n&&(n?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=n,this._pendingValue=m}}}]),t}(),j=function(t){function e(t,r,i){var o;return n(this,e),(o=l(this,a(e).call(this,t,r,i))).single=2===i.length&&""===i[0]&&""===i[1],o}return u(e,T),r(e,[{key:"_createPart",value:function(){return new C(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:c(a(e.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),e}(),C=function(t){function e(){return n(this,e),l(this,a(e).apply(this,arguments))}return u(e,O),e}(),q=!1;try{var L={get capture(){return q=!0,!1}};window.addEventListener("test",L,L),window.removeEventListener("test",L,L)}catch(t){}var R=function(){function t(e,r,i){var o=this;n(this,t),this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=r,this.eventContext=i,this._boundHandleEvent=function(t){return o.handleEvent(t)}}return r(t,[{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;d(this._pendingValue);){var t=this._pendingValue;this._pendingValue=m,t(this)}if(this._pendingValue!==m){var n=this._pendingValue,e=this.value,r=null==n||null!=e&&(n.capture!==e.capture||n.once!==e.once||n.passive!==e.passive),i=null!=n&&(null==e||r);r&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=B(n),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=n,this._pendingValue=m}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),t}(),B=function(t){return t&&(q?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)},z=new(function(){function t(){n(this,t)}return r(t,[{key:"handleAttributeExpressions",value:function(t,n,e,r){var i=n[0];return"."===i?new j(t,n.slice(1),e).parts:"@"===i?[new R(t,n.slice(1),r.eventContext)]:"?"===i?[new V(t,n.slice(1),e)]:new T(t,n,e).parts}},{key:"handleTextExpression",value:function(t){return new I(t)}}]),t}());function H(t){var n=D.get(t.type);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},D.set(t.type,n));var e=n.stringsArray.get(t.strings);if(void 0!==e)return e;var r=t.strings.join(_);return void 0===(e=n.keyString.get(r))&&(e=new x(t,t.getTemplateElement()),n.keyString.set(r,e)),n.stringsArray.set(t.strings,e),e}var D=new Map,X=new WeakMap,$=function(t,n,e){var r=X.get(n);void 0===r&&(g(n,n.firstChild),X.set(n,r=new I(Object.assign({templateFactory:H},e))),r.appendInto(n)),r.setValue(t),r.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");var W=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new A(t,e,"html",z)},F=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new M(t,e,"svg",z)};var Y="https://api.districtr.org",J=new(function(){function t(e,r){n(this,t),null==e&&(e=Y),this.base_url=e,null==r&&(r=[]),this.middleware=r}return r(t,[{key:"request",value:function(t,n,e,r){var i;return null!=e&&(i=JSON.stringify(e)),fetch(this.base_url+t,this.middleware.reduce(function(t,n){return n(t)},{method:n,body:i,headers:o({"Content-Type":"application/json"},r)}))}},{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t,n){return this.request(t,"POST",n)}},{key:"put",value:function(t,n){return this.request(t,"PUT",n)}},{key:"delete",value:function(t,n){return this.request(t,"DELETE",n)}},{key:"patch",value:function(t,n){return this.request(t,"PATCH",n)}}]),t}())(Y);function U(t){return function(){var n=localStorage.getItem("bearerToken");if(null!=n)return new Promise(function(t){return t(n)});var e=function(){var t=function(t){if(t.length<="?token=".length)return null;return t.slice("?token=".length)}(window.location.search);return null!==t&&(n=t,"string"==typeof n||n instanceof String)&&t.length>0?t:null;var n}();return null!=e?function(n){return t.post("/tokens/",{token:n}).then((e=G,e=o({default:function(t){return console.error("Request failed",t)}},e),function(t){return e.hasOwnProperty(t.status)?e[t.status](t):e.default(t)})).then(function(t){if(null==t)return null;var n=t.token;return null!=n?n:null});var e}(e):new Promise(function(t){return t(null)})}().then(function(n){if(null!=n){localStorage.setItem("bearerToken",n);t.middleware.push(function(t){return t.headers.Authorization="Bearer ".concat(n),t});var e=atob(n.split(".")[1]);return e&&localStorage.setItem("user",e),JSON.parse(e)}return localStorage.clear(),null})}var G={201:function(t){return t.json()},default:function(){return null}};var Q,Z=new WeakMap,K=(Q=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){var e=Z.get(t);void 0===e&&(e={values:[]},Z.set(t,e));var r=e.values;e.values=n;var i=function(i){if(void 0!==e.lastRenderedIndex&&i>e.lastRenderedIndex)return"break";var o=n[i];return P(o)||"function"!=typeof o.then?(t.setValue(o),e.lastRenderedIndex=i,"break"):void 0!==e.lastRenderedIndex&&"function"==typeof o.then&&o===r[i]?"continue":(e.lastRenderedIndex=void 0,void Promise.resolve(o).then(function(n){var r=e.values.indexOf(o);r>-1&&(void 0===e.lastRenderedIndex||r<e.lastRenderedIndex)&&(e.lastRenderedIndex=r,t.setValue(n),t.commit())}))};t:for(var o=0;o<n.length;o++){switch(i(o)){case"break":break t;case"continue":continue}}}},function(){var t=Q.apply(void 0,arguments);return p.set(t,!0),t});function tt(){return new nt}function nt(){this.reset()}nt.prototype={constructor:nt,reset:function(){this.s=this.t=0},add:function(t){rt(et,t,this.t),rt(this,et.s,this.s),this.s?this.t+=et.t:this.s=et.t},valueOf:function(){return this.s}};var et=new nt;function rt(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var it=1e-6,ot=Math.PI,ut=ot/2,at=ot/4,st=2*ot,lt=180/ot,ct=ot/180,ft=Math.abs,ht=Math.atan,pt=Math.atan2,dt=Math.cos,vt=Math.sin,gt=Math.sign||function(t){return t>0?1:t<0?-1:0},mt=Math.sqrt;function yt(t){return t>1?ut:t<-1?-ut:Math.asin(t)}function _t(){}function wt(t,n){t&&xt.hasOwnProperty(t.type)&&xt[t.type](t,n)}var bt={Feature:function(t,n){wt(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)wt(e[r].geometry,n)}},xt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Et(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Et(e[r],n,0)},Polygon:function(t,n){Nt(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Nt(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)wt(e[r],n)}};function Et(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Nt(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Et(t[e],n,1);n.polygonEnd()}function St(t,n){t&&bt.hasOwnProperty(t.type)?bt[t.type](t,n):wt(t,n)}tt(),tt();function kt(t){return[pt(t[1],t[0]),yt(t[2])]}function At(t){var n=t[0],e=t[1],r=dt(e);return[r*dt(n),r*vt(n),vt(e)]}function Mt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Pt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Tt(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Ot(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function It(t){var n=mt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}tt();function Vt(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function jt(t,n){return[ft(t)>ot?t+Math.round(-t/st)*st:t,n]}function Ct(t){return function(n,e){return[(n+=t)>ot?n-st:n<-ot?n+st:n,e]}}function qt(t){var n=Ct(t);return n.invert=Ct(-t),n}function Lt(t,n){var e=dt(t),r=vt(t),i=dt(n),o=vt(n);function u(t,n){var u=dt(n),a=dt(t)*u,s=vt(t)*u,l=vt(n),c=l*e+a*r;return[pt(s*i-c*o,a*e-l*r),yt(c*i+s*o)]}return u.invert=function(t,n){var u=dt(n),a=dt(t)*u,s=vt(t)*u,l=vt(n),c=l*i-s*o;return[pt(s*i+l*o,a*e+c*r),yt(c*e-a*r)]},u}function Rt(t,n){(n=At(n))[0]-=t,It(n);var e,r=(e=-n[1])>1?0:e<-1?ot:Math.acos(e);return((-n[2]<0?-r:r)+st-it)%st}function Bt(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:_t,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function zt(t,n){return ft(t[0]-n[0])<it&&ft(t[1]-n[1])<it}function Ht(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Dt(t,n,e,r,i){var o,u,a=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(zt(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(e=new Ht(r,t,null,!0)),s.push(e.o=new Ht(r,null,e,!1)),a.push(e=new Ht(u,t,null,!1)),s.push(e.o=new Ht(u,null,e,!0))}}),a.length){for(s.sort(n),Xt(a),Xt(s),o=0,u=s.length;o<u;++o)s[o].e=e=!e;for(var l,c,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=l.length;o<u;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Xt(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}jt.invert=jt;var $t=tt();function Wt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}!function(t){var n;1===t.length&&(n=t,t=function(t,e){return Wt(n(t),e)})}(Wt);function Ft(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--u]=r[n];return e}function Yt(t,n,e,r){return function(i){var o,u,a,s=n(i),l=Bt(),c=n(l),f=!1,h={point:p,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=_,u=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=g,u=Ft(u);var t=function(t,n){var e=n[0],r=n[1],i=vt(r),o=[vt(e),-dt(e),0],u=0,a=0;$t.reset(),1===i?r=ut+it:-1===i&&(r=-ut-it);for(var s=0,l=t.length;s<l;++s)if(f=(c=t[s]).length)for(var c,f,h=c[f-1],p=h[0],d=h[1]/2+at,v=vt(d),g=dt(d),m=0;m<f;++m,p=_,v=b,g=x,h=y){var y=c[m],_=y[0],w=y[1]/2+at,b=vt(w),x=dt(w),E=_-p,N=E>=0?1:-1,S=N*E,k=S>ot,A=v*b;if($t.add(pt(A*N*vt(S),g*x+A*dt(S))),u+=k?E+N*st:E,k^p>=e^_>=e){var M=Pt(At(h),At(y));It(M);var P=Pt(o,M);It(P);var T=(k^E>=0?-1:1)*yt(P[2]);(r>T||r===T&&(M[0]||M[1]))&&(a+=k^E>=0?1:-1)}}return(u<-it||u<it&&$t<-it)^1&a}(o,r);u.length?(f||(i.polygonStart(),f=!0),Dt(u,Ut,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),u=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function d(t,n){s.point(t,n)}function v(){h.point=d,s.lineStart()}function g(){h.point=p,s.lineEnd()}function m(t,n){a.push([t,n]),c.point(t,n)}function y(){c.lineStart(),a=[]}function _(){m(a[0][0],a[0][1]),c.lineEnd();var t,n,e,r,s=c.clean(),h=l.result(),p=h.length;if(a.pop(),o.push(a),a=null,p)if(1&s){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&s&&h.push(h.pop().concat(h.shift())),u.push(h.filter(Jt))}return h}}function Jt(t){return t.length>1}function Ut(t,n){return((t=t.x)[0]<0?t[1]-ut-it:ut-t[1])-((n=n.x)[0]<0?n[1]-ut-it:ut-n[1])}var Gt=Yt(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?ot:-ot,s=ft(o-e);ft(s-ot)<it?(t.point(e,r=(r+u)/2>0?ut:-ut),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&s>=ot&&(ft(e-i)<it&&(e-=i*it),ft(o-a)<it&&(o-=a*it),r=function(t,n,e,r){var i,o,u=vt(t-e);return ft(u)>it?ht((vt(n)*(o=dt(r))*vt(e)-vt(r)*(i=dt(n))*vt(t))/(i*o*u)):(n+r)/2}(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*ut,r.point(-ot,i),r.point(0,i),r.point(ot,i),r.point(ot,0),r.point(ot,-i),r.point(0,-i),r.point(-ot,-i),r.point(-ot,0),r.point(-ot,i);else if(ft(t[0]-n[0])>it){var o=t[0]<n[0]?ot:-ot;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-ot,-ut]);function Qt(t){var n=dt(t),e=6*ct,r=n>0,i=ft(n)>it;function o(t,e){return dt(t)*dt(e)>n}function u(t,e,r){var i=[1,0,0],o=Pt(At(t),At(e)),u=Mt(o,o),a=o[0],s=u-a*a;if(!s)return!r&&t;var l=n*u/s,c=-n*a/s,f=Pt(i,o),h=Ot(i,l);Tt(h,Ot(o,c));var p=f,d=Mt(h,p),v=Mt(p,p),g=d*d-v*(Mt(h,h)-1);if(!(g<0)){var m=mt(g),y=Ot(p,(-d-m)/v);if(Tt(y,h),y=kt(y),!r)return y;var _,w=t[0],b=e[0],x=t[1],E=e[1];b<w&&(_=w,w=b,b=_);var N=b-w,S=ft(N-ot)<it;if(!S&&E<x&&(_=x,x=E,E=_),S||N<it?S?x+E>0^y[1]<(ft(y[0]-w)<it?x:E):x<=y[1]&&y[1]<=E:N>ot^(w<=y[0]&&y[0]<=b)){var k=Ot(p,(-d+m)/v);return Tt(k,h),[y,kt(k)]}}}function a(n,e){var i=r?t:ot-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return Yt(o,function(t){var n,e,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var p,d=[f,h],v=o(f,h),g=r?v?0:a(f,h):v?a(f+(f<0?ot:-ot),h):0;if(!n&&(l=s=v)&&t.lineStart(),v!==s&&(!(p=u(n,d))||zt(n,p)||zt(d,p))&&(d[0]+=it,d[1]+=it,v=o(d[0],d[1])),v!==s)c=0,v?(t.lineStart(),p=u(d,n),t.point(p[0],p[1])):(p=u(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(i&&n&&r^v){var m;g&e||!(m=u(d,n,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||n&&zt(n,d)||t.point(d[0],d[1]),n=d,s=v,e=g},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}},function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var u=dt(n),a=vt(n),s=r*e;null==i?(i=n+r*st,o=n-s/2):(i=Rt(u,i),o=Rt(u,o),(r>0?i<o:i>o)&&(i+=r*st));for(var l,c=i;r>0?c>o:c<o;c-=s)l=kt([u,-a*dt(c),-a*vt(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},r?[0,-t]:[-ot,t-ot])}var Zt=1e9,Kt=-Zt;function tn(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,l){var c=0,f=0;if(null==i||(c=u(i,a))!==(f=u(o,a))||s(i,o)<0^a>0)do{l.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+a+4)%4)!==f);else l.point(o[0],o[1])}function u(r,i){return ft(r[0]-t)<it?i>0?0:3:ft(r[0]-e)<it?i>0?2:1:ft(r[1]-n)<it?i>0?1:0:i>0?3:2}function a(t,n){return s(t.x,n.x)}function s(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){var s,l,c,f,h,p,d,v,g,m,y,_=u,w=Bt(),b={point:x,lineStart:function(){b.point=E,l&&l.push(c=[]);m=!0,g=!1,d=v=NaN},lineEnd:function(){s&&(E(f,h),p&&g&&w.rejoin(),s.push(w.result()));b.point=x,g&&_.lineEnd()},polygonStart:function(){_=w,s=[],l=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=l.length;e<i;++e)for(var o,u,a=l[e],s=1,c=a.length,f=a[0],h=f[0],p=f[1];s<c;++s)o=h,u=p,f=a[s],h=f[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(h-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),e=y&&n,i=(s=Ft(s)).length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&Dt(s,a,n,o,u),u.polygonEnd());_=u,s=l=c=null}};function x(t,n){i(t,n)&&_.point(t,n)}function E(o,u){var a=i(o,u);if(l&&c.push([o,u]),m)f=o,h=u,p=a,m=!1,a&&(_.lineStart(),_.point(o,u));else if(a&&g)_.point(o,u);else{var s=[d=Math.max(Kt,Math.min(Zt,d)),v=Math.max(Kt,Math.min(Zt,v))],w=[o=Math.max(Kt,Math.min(Zt,o)),u=Math.max(Kt,Math.min(Zt,u))];!function(t,n,e,r,i,o){var u,a=t[0],s=t[1],l=0,c=1,f=n[0]-a,h=n[1]-s;if(u=e-a,f||!(u>0)){if(u/=f,f<0){if(u<l)return;u<c&&(c=u)}else if(f>0){if(u>c)return;u>l&&(l=u)}if(u=i-a,f||!(u<0)){if(u/=f,f<0){if(u>c)return;u>l&&(l=u)}else if(f>0){if(u<l)return;u<c&&(c=u)}if(u=r-s,h||!(u>0)){if(u/=h,h<0){if(u<l)return;u<c&&(c=u)}else if(h>0){if(u>c)return;u>l&&(l=u)}if(u=o-s,h||!(u<0)){if(u/=h,h<0){if(u>c)return;u>l&&(l=u)}else if(h>0){if(u<l)return;u<c&&(c=u)}return l>0&&(t[0]=a+l*f,t[1]=s+l*h),c<1&&(n[0]=a+c*f,n[1]=s+c*h),!0}}}}}(s,w,t,n,e,r)?a&&(_.lineStart(),_.point(o,u),y=!1):(g||(_.lineStart(),_.point(s[0],s[1])),_.point(w[0],w[1]),a||_.lineEnd(),y=!1)}d=o,v=u,g=a}return b}}tt();function nn(t){return t}var en,rn,on,un,an=tt(),sn=tt(),ln={point:_t,lineStart:_t,lineEnd:_t,polygonStart:function(){ln.lineStart=cn,ln.lineEnd=pn},polygonEnd:function(){ln.lineStart=ln.lineEnd=ln.point=_t,an.add(ft(sn)),sn.reset()},result:function(){var t=an/2;return an.reset(),t}};function cn(){ln.point=fn}function fn(t,n){ln.point=hn,en=on=t,rn=un=n}function hn(t,n){sn.add(un*t-on*n),on=t,un=n}function pn(){hn(en,rn)}var dn=1/0,vn=dn,gn=-dn,mn=gn,yn={point:function(t,n){t<dn&&(dn=t);t>gn&&(gn=t);n<vn&&(vn=n);n>mn&&(mn=n)},lineStart:_t,lineEnd:_t,polygonStart:_t,polygonEnd:_t,result:function(){var t=[[dn,vn],[gn,mn]];return gn=mn=-(vn=dn=1/0),t}};var _n,wn,bn,xn,En=0,Nn=0,Sn=0,kn=0,An=0,Mn=0,Pn=0,Tn=0,On=0,In={point:Vn,lineStart:jn,lineEnd:Ln,polygonStart:function(){In.lineStart=Rn,In.lineEnd=Bn},polygonEnd:function(){In.point=Vn,In.lineStart=jn,In.lineEnd=Ln},result:function(){var t=On?[Pn/On,Tn/On]:Mn?[kn/Mn,An/Mn]:Sn?[En/Sn,Nn/Sn]:[NaN,NaN];return En=Nn=Sn=kn=An=Mn=Pn=Tn=On=0,t}};function Vn(t,n){En+=t,Nn+=n,++Sn}function jn(){In.point=Cn}function Cn(t,n){In.point=qn,Vn(bn=t,xn=n)}function qn(t,n){var e=t-bn,r=n-xn,i=mt(e*e+r*r);kn+=i*(bn+t)/2,An+=i*(xn+n)/2,Mn+=i,Vn(bn=t,xn=n)}function Ln(){In.point=Vn}function Rn(){In.point=zn}function Bn(){Hn(_n,wn)}function zn(t,n){In.point=Hn,Vn(_n=bn=t,wn=xn=n)}function Hn(t,n){var e=t-bn,r=n-xn,i=mt(e*e+r*r);kn+=i*(bn+t)/2,An+=i*(xn+n)/2,Mn+=i,Pn+=(i=xn*t-bn*n)*(bn+t),Tn+=i*(xn+n),On+=3*i,Vn(bn=t,xn=n)}function Dn(t){this._context=t}Dn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,st)}},result:_t};var Xn,$n,Wn,Fn,Yn,Jn=tt(),Un={point:_t,lineStart:function(){Un.point=Gn},lineEnd:function(){Xn&&Qn($n,Wn),Un.point=_t},polygonStart:function(){Xn=!0},polygonEnd:function(){Xn=null},result:function(){var t=+Jn;return Jn.reset(),t}};function Gn(t,n){Un.point=Qn,$n=Fn=t,Wn=Yn=n}function Qn(t,n){Fn-=t,Yn-=n,Jn.add(mt(Fn*Fn+Yn*Yn)),Fn=t,Yn=n}function Zn(){this._string=[]}function Kn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function te(t){return function(n){var e=new ne;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ne(){}function ee(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),St(e,t.stream(yn)),n(yn.result()),null!=r&&t.clipExtent(r),t}function re(t,n,e){return ee(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])},e)}function ie(t,n,e){return re(t,[[0,0],n],e)}function oe(t,n,e){return ee(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])},e)}function ue(t,n,e){return ee(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])},e)}Zn.prototype={_radius:4.5,_circle:Kn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=Kn(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ne.prototype={constructor:ne,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ae=16,se=dt(30*ct);function le(t,n){return+n?function(t,n){function e(r,i,o,u,a,s,l,c,f,h,p,d,v,g){var m=l-r,y=c-i,_=m*m+y*y;if(_>4*n&&v--){var w=u+h,b=a+p,x=s+d,E=mt(w*w+b*b+x*x),N=yt(x/=E),S=ft(ft(x)-1)<it||ft(o-f)<it?(o+f)/2:pt(b,w),k=t(S,N),A=k[0],M=k[1],P=A-r,T=M-i,O=y*P-m*T;(O*O/_>n||ft((m*P+y*T)/_-.5)>.3||u*h+a*p+s*d<se)&&(e(r,i,o,u,a,s,A,M,S,w/=E,b/=E,x,v,g),g.point(A,M),e(A,M,S,w,b,x,l,c,f,h,p,d,v,g))}}return function(n){var r,i,o,u,a,s,l,c,f,h,p,d,v={point:g,lineStart:m,lineEnd:_,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){c=NaN,v.point=y,n.lineStart()}function y(r,i){var o=At([r,i]),u=t(r,i);e(c,f,l,h,p,d,c=u[0],f=u[1],l=r,h=o[0],p=o[1],d=o[2],ae,n),n.point(c,f)}function _(){v.point=g,n.lineEnd()}function w(){m(),v.point=b,v.lineEnd=x}function b(t,n){y(r=t,n),i=c,o=f,u=h,a=p,s=d,v.point=y}function x(){e(c,f,l,h,p,d,i,o,r,u,a,s,ae,n),v.lineEnd=_,_()}return v}}(t,n):function(t){return te({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var ce=te({point:function(t,n){this.stream.point(t*ct,n*ct)}});function fe(t,n,e,r){var i=dt(r),o=vt(r),u=i*t,a=o*t,s=i/t,l=o/t,c=(o*e-i*n)/t,f=(o*n+i*e)/t;function h(t,r){return[u*t-a*r+n,e-a*t-u*r]}return h.invert=function(t,n){return[s*t-l*n+c,f-l*t-s*n]},h}function he(t){var n,e,r,i,o,u,a,s,l,c,f=150,h=480,p=250,d=0,v=0,g=0,m=0,y=0,_=0,w=null,b=Gt,x=null,E=nn,N=.5;function S(t){return s(t[0]*ct,t[1]*ct)}function k(t){return(t=s.invert(t[0],t[1]))&&[t[0]*lt,t[1]*lt]}function A(){var t=fe(f,0,0,_).apply(null,n(d,v)),r=(_?fe:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(f,h-t[0],p-t[1],_);return e=function(t,n,e){return(t%=st)?n||e?Vt(qt(t),Lt(n,e)):qt(t):n||e?Lt(n,e):jt}(g,m,y),a=Vt(n,r),s=Vt(e,a),u=le(a,N),M()}function M(){return l=c=null,S}return S.stream=function(t){return l&&c===t?l:l=ce(function(t){return te({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(b(u(E(c=t)))))},S.preclip=function(t){return arguments.length?(b=t,w=void 0,M()):b},S.postclip=function(t){return arguments.length?(E=t,x=r=i=o=null,M()):E},S.clipAngle=function(t){return arguments.length?(b=+t?Qt(w=t*ct):(w=null,Gt),M()):w*lt},S.clipExtent=function(t){return arguments.length?(E=null==t?(x=r=i=o=null,nn):tn(x=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),M()):null==x?null:[[x,r],[i,o]]},S.scale=function(t){return arguments.length?(f=+t,A()):f},S.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],A()):[h,p]},S.center=function(t){return arguments.length?(d=t[0]%360*ct,v=t[1]%360*ct,A()):[d*lt,v*lt]},S.rotate=function(t){return arguments.length?(g=t[0]%360*ct,m=t[1]%360*ct,y=t.length>2?t[2]%360*ct:0,A()):[g*lt,m*lt,y*lt]},S.angle=function(t){return arguments.length?(_=t%360*ct,A()):_*lt},S.precision=function(t){return arguments.length?(u=le(a,N=t*t),M()):mt(N)},S.fitExtent=function(t,n){return re(S,t,n)},S.fitSize=function(t,n){return ie(S,t,n)},S.fitWidth=function(t,n){return oe(S,t,n)},S.fitHeight=function(t,n){return ue(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&k,A()}}function pe(t,n){var e=vt(t),r=(e+vt(n))/2;if(ft(r)<it)return function(t){var n=dt(t);function e(t,e){return[t*n,vt(e)/n]}return e.invert=function(t,e){return[t/n,yt(e*n)]},e}(t);var i=1+e*(2*r-e),o=mt(i)/r;function u(t,n){var e=mt(i-2*r*vt(n))/r;return[e*vt(t*=r),o-e*dt(t)]}return u.invert=function(t,n){var e=o-n;return[pt(t,ft(e))/r*gt(e),yt((i-(t*t+e*e)*r*r)/(2*r))]},u}function de(){return(t=pe,n=0,e=ot/3,r=he(t),i=r(n,e),i.parallels=function(t){return arguments.length?r(n=t[0]*ct,e=t[1]*ct):[n*lt,e*lt]},i).scale(155.424).center([0,33.6442]);var t,n,e,r,i}function ve(){var t,n,e,r,i,o,u=de().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),a=de().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=de().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){o=[t,n]}};function c(t){var n=t[0],u=t[1];return o=null,e.point(n,u),o||(r.point(n,u),o)||(i.point(n,u),o)}function f(){return t=n=null,c}return c.invert=function(t){var n=u.scale(),e=u.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:u).invert(t)},c.stream=function(e){return t&&n===e?t:(r=[u.stream(n=e),a.stream(e),s.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(u.precision(t),a.precision(t),s.precision(t),f()):u.precision()},c.scale=function(t){return arguments.length?(u.scale(t),a.scale(.35*t),s.scale(t),c.translate(u.translate())):u.scale()},c.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),o=+t[0],c=+t[1];return e=u.translate(t).clipExtent([[o-.455*n,c-.238*n],[o+.455*n,c+.238*n]]).stream(l),r=a.translate([o-.307*n,c+.201*n]).clipExtent([[o-.425*n+it,c+.12*n+it],[o-.214*n-it,c+.234*n-it]]).stream(l),i=s.translate([o-.205*n,c+.212*n]).clipExtent([[o-.214*n+it,c+.166*n+it],[o-.115*n-it,c+.234*n-it]]).stream(l),f()},c.fitExtent=function(t,n){return re(c,t,n)},c.fitSize=function(t,n){return ie(c,t,n)},c.fitWidth=function(t,n){return oe(c,t,n)},c.fitHeight=function(t,n){return ue(c,t,n)},c.scale(1070)}function ge(){return fetch(("localhost"===window.location.hostname?"http://localhost:3000":window.location.hostname.includes("mggg.org")?"https://mggg.org/Districtr":window.location.hostname.includes("districtr.org")?"https://districtr.org":void 0)+"/assets/data/response.json").then(function(t){return t.json()})}var me={"/":"./","/new":"./new","/edit":"./edit","/register":"./register","/request":"./request","/signin":"./signin","/signout":"./signout"};function ye(t,n,e,r){localStorage.setItem("place",JSON.stringify(t)),localStorage.setItem("units",JSON.stringify(e)),localStorage.setItem("districtingProblem",JSON.stringify(n)),localStorage.removeItem("assignment"),localStorage.removeItem("planId"),null!=r&&localStorage.setItem("planId",r),function(t){if(!me.hasOwnProperty(t))throw Error("The requested route does not exist: "+t);location.assign(me[t])}("/edit")}function _e(){var t=f(['\n                              <ul class="places-list">\n                                  ',"\n                              </ul>\n                          "]);return _e=function(){return t},t}function we(){var t=f(["\n            ","\n        "]);return we=function(){return t},t}function be(){var t=f(['\n                                  <div class="place-info">\n                                      ',"\n                                  </div>\n                              "]);return be=function(){return t},t}function xe(){var t=f(['\n                                  <div class="place-info">\n                                      Multi-member Districts\n                                  </div>\n                              ']);return xe=function(){return t},t}function Ee(){var t=f(['\n                    <li\n                        class="places-list__item"\n                        @click="','"\n                    >\n                        <div class="place-name">',"</div>\n                        ",'\n                        <div class="place-info">\n                            '," ","\n                        </div>\n                        ","\n                    </li>\n                "]);return Ee=function(){return t},t}var Ne={},Se=null;function ke(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae;return new Me(function(t){return null===Se?ge().then(function(n){return Se=n,Ne[t]=Se.filter(function(n){return n.state===t||n.name===t}),Ne[t]}):(void 0===Ne[t]&&(Ne[t]=Se.filter(function(n){return n.state===t||n.name===t})),Promise.resolve(Ne[t]))}(t),ye,e,n)}function Ae(t,n){return t.districtingProblems.map(function(e){return t.units.map(function(r){return W(Ee(),function(){return n(t,e,r)},t.name,"multimember"===e.type?W(xe()):"",e.numberOfParts,e.pluralNoun,r.unitType?W(be(),r.unitType):"")})}).reduce(function(t,n){return[].concat(h(t),h(n))},[])}var Me=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae,o=arguments.length>3?arguments[3]:void 0;n(this,t),this.places=e,this.choosePlace=r,this.placeItemsTemplate=i,null==o&&(o=function(){return""}),this.fallbackComponent=o}return r(t,[{key:"render",value:function(){var t=this;return W(we(),K(this.places.then(function(n){return n.length>0?W(_e(),n.map(function(n){return t.placeItemsTemplate(n,t.choosePlace)}).reduce(function(t,n){return[].concat(h(t),h(n))},[])):t.fallbackComponent()}),""))}}]),t}(),Pe="http://www.w3.org/1999/xhtml",Te={svg:"http://www.w3.org/2000/svg",xhtml:Pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Oe(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Te.hasOwnProperty(n)?{space:Te[n],local:t}:t}function Ie(t){var n=Oe(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Pe&&n.documentElement.namespaceURI===Pe?n.createElement(t):n.createElementNS(e,t)}})(n)}function Ve(){}function je(t){return null==t?Ve:function(){return this.querySelector(t)}}function Ce(){return[]}function qe(t){return null==t?Ce:function(){return this.querySelectorAll(t)}}function Le(t){return function(){return this.matches(t)}}function Re(t){return new Array(t.length)}function Be(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Be.prototype={constructor:Be,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ze="$";function He(t,n,e,r,i,o){for(var u,a=0,s=n.length,l=o.length;a<l;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new Be(t,o[a]);for(;a<s;++a)(u=n[a])&&(i[a]=u)}function De(t,n,e,r,i,o,u){var a,s,l,c={},f=n.length,h=o.length,p=new Array(f);for(a=0;a<f;++a)(s=n[a])&&(p[a]=l=ze+u.call(s,s.__data__,a,n),l in c?i[a]=s:c[l]=s);for(a=0;a<h;++a)(s=c[l=ze+u.call(t,o[a],a,o)])?(r[a]=s,s.__data__=o[a],c[l]=null):e[a]=new Be(t,o[a]);for(a=0;a<f;++a)(s=n[a])&&c[p[a]]===s&&(i[a]=s)}function Xe(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function $e(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function We(t,n){return t.style.getPropertyValue(n)||$e(t).getComputedStyle(t,null).getPropertyValue(n)}function Fe(t){return t.trim().split(/^|\s+/)}function Ye(t){return t.classList||new Je(t)}function Je(t){this._node=t,this._names=Fe(t.getAttribute("class")||"")}function Ue(t,n){for(var e=Ye(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Ge(t,n){for(var e=Ye(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Qe(){this.textContent=""}function Ze(){this.innerHTML=""}function Ke(){this.nextSibling&&this.parentNode.appendChild(this)}function tr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nr(){return null}function er(){var t=this.parentNode;t&&t.removeChild(this)}function rr(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ir(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Je.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var or={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(or={mouseenter:"mouseover",mouseleave:"mouseout"}));function ur(t,n,e){return t=ar(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function ar(t,n,e){return function(r){try{t.call(this,this.__data__,n,e)}finally{}}}function sr(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function lr(t,n,e){var r=or.hasOwnProperty(t.type)?ur:ar;return function(i,o,u){var a,s=this.__on,l=r(n,o,u);if(s)for(var c=0,f=s.length;c<f;++c)if((a=s[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=l,a.capture=e),void(a.value=n);this.addEventListener(t.type,l,e),a={type:t.type,name:t.name,value:n,listener:l,capture:e},s?s.push(a):this.__on=[a]}}function cr(t,n,e){var r=$e(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var fr=[null];function hr(t,n){this._groups=t,this._parents=n}function pr(){return new hr([[document.documentElement]],fr)}function dr(t){return"string"==typeof t?new hr([[document.querySelector(t)]],[document.documentElement]):new hr([[t]],fr)}function vr(t){return"string"==typeof t?new hr([document.querySelectorAll(t)],[document.documentElement]):new hr([null==t?[]:t],fr)}hr.prototype=pr.prototype={constructor:hr,select:function(t){"function"!=typeof t&&(t=je(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],s=a.length,l=r[i]=new Array(s),c=0;c<s;++c)(o=a[c])&&(u=t.call(o,o.__data__,c,a))&&("__data__"in o&&(u.__data__=o.__data__),l[c]=u);return new hr(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=qe(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],s=a.length,l=0;l<s;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new hr(r,i)},filter:function(t){"function"!=typeof t&&(t=Le(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,s=r[i]=[],l=0;l<a;++l)(o=u[l])&&t.call(o,o.__data__,l,u)&&s.push(o);return new hr(r,this._parents)},data:function(t,n){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var e,r=n?De:He,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),s=new Array(u),l=new Array(u),c=0;c<u;++c){var f=i[c],h=o[c],p=h.length,d=t.call(f,f&&f.__data__,c,i),v=d.length,g=s[c]=new Array(v),m=a[c]=new Array(v);r(f,h,g,m,l[c]=new Array(p),d,n);for(var y,_,w=0,b=0;w<v;++w)if(y=g[w]){for(w>=b&&(b=w+1);!(_=m[b])&&++b<v;);y._next=_||null}}return(a=new hr(a,i))._enter=s,a._exit=l,a},enter:function(){return new hr(this._enter||this._groups.map(Re),this._parents)},exit:function(){return new hr(this._exit||this._groups.map(Re),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,l=n[a],c=e[a],f=l.length,h=u[a]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new hr(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Xe);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],s=a.length,l=i[o]=new Array(s),c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(n)}return new hr(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=Oe(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):We(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=Fe(t+"");if(arguments.length<2){for(var r=Ye(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?Ue:Ge)(this,t)}}:n?function(t){return function(){Ue(this,t)}}:function(t){return function(){Ge(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?Qe:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ze:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Ke)},lower:function(){return this.each(tr)},append:function(t){var n="function"==typeof t?t:Ie(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:Ie(t),r=null==n?nr:"function"==typeof n?n:je(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(er)},clone:function(t){return this.select(t?ir:rr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?lr:sr,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var s,l=0,c=a.length;l<c;++l)for(r=0,s=a[l];r<u;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return cr(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return cr(this,t,n)}})(t,n))}};var gr={value:function(){}};function mr(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new yr(r)}function yr(t){this._=t}function _r(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function wr(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=gr,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}yr.prototype=mr.prototype={constructor:yr,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),u=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<a;)if(e=(t=o[u]).type)i[e]=wr(i[e],t.name,n);else if(null==n)for(e in i)i[e]=wr(i[e],t.name,null);return this}for(;++u<a;)if((e=(t=o[u]).type)&&(e=_r(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new yr(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var br,xr,Er=0,Nr=0,Sr=0,kr=1e3,Ar=0,Mr=0,Pr=0,Tr="object"==typeof performance&&performance.now?performance:Date,Or="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ir(){return Mr||(Or(Vr),Mr=Tr.now()+Pr)}function Vr(){Mr=0}function jr(){this._call=this._time=this._next=null}function Cr(t,n,e){var r=new jr;return r.restart(t,n,e),r}function qr(){Mr=(Ar=Tr.now())+Pr,Er=Nr=0;try{!function(){Ir(),++Er;for(var t,n=br;n;)(t=Mr-n._time)>=0&&n._call.call(null,t),n=n._next;--Er}()}finally{Er=0,function(){var t,n,e=br,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:br=n);xr=t,Rr(r)}(),Mr=0}}function Lr(){var t=Tr.now(),n=t-Ar;n>kr&&(Pr-=n,Ar=t)}function Rr(t){Er||(Nr&&(Nr=clearTimeout(Nr)),t-Mr>24?(t<1/0&&(Nr=setTimeout(qr,t-Tr.now()-Pr)),Sr&&(Sr=clearInterval(Sr))):(Sr||(Ar=Tr.now(),Sr=setInterval(Lr,kr)),Er=1,Or(qr)))}function Br(t,n,e){var r=new jr;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}jr.prototype=Cr.prototype={constructor:jr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Ir():+e)+(null==n?0:+n),this._next||xr===this||(xr?xr._next=this:br=this,xr=this),this._call=t,this._time=e,Rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rr())}};var zr=mr("start","end","cancel","interrupt"),Hr=[],Dr=0,Xr=1,$r=2,Wr=3,Fr=4,Yr=5,Jr=6;function Ur(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(s){var l,c,f,h;if(e.state!==Xr)return a();for(l in i)if((h=i[l]).name===e.name){if(h.state===Wr)return Br(o);h.state===Fr?(h.state=Jr,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<n&&(h.state=Jr,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(Br(function(){e.state===Wr&&(e.state=Fr,e.timer.restart(u,e.delay,e.time),u(s))}),e.state=$r,e.on.call("start",t,t.__data__,e.index,e.group),e.state===$r){for(e.state=Wr,r=new Array(f=e.tween.length),l=0,c=-1;l<f;++l)(h=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=h);r.length=c+1}}function u(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(a),e.state=Yr,1),o=-1,u=r.length;++o<u;)r[o].call(t,i);e.state===Yr&&(e.on.call("end",t,t.__data__,e.index,e.group),a())}function a(){for(var r in e.state=Jr,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Cr(function(t){e.state=Xr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:zr,tween:Hr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Dr})}function Gr(t,n){var e=Zr(t,n);if(e.state>Dr)throw new Error("too late; already scheduled");return e}function Qr(t,n){var e=Zr(t,n);if(e.state>Wr)throw new Error("too late; already running");return e}function Zr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Kr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function ti(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ni(){}var ei="\\s*([+-]?\\d+)\\s*",ri="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ii="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oi=/^#([0-9a-f]{3})$/,ui=/^#([0-9a-f]{6})$/,ai=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),si=new RegExp("^rgb\\("+[ii,ii,ii]+"\\)$"),li=new RegExp("^rgba\\("+[ei,ei,ei,ri]+"\\)$"),ci=new RegExp("^rgba\\("+[ii,ii,ii,ri]+"\\)$"),fi=new RegExp("^hsl\\("+[ri,ii,ii]+"\\)$"),hi=new RegExp("^hsla\\("+[ri,ii,ii,ri]+"\\)$"),pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function di(t){var n;return t=(t+"").trim().toLowerCase(),(n=oi.exec(t))?new _i((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=ui.exec(t))?vi(parseInt(n[1],16)):(n=ai.exec(t))?new _i(n[1],n[2],n[3],1):(n=si.exec(t))?new _i(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=li.exec(t))?gi(n[1],n[2],n[3],n[4]):(n=ci.exec(t))?gi(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=fi.exec(t))?bi(n[1],n[2]/100,n[3]/100,1):(n=hi.exec(t))?bi(n[1],n[2]/100,n[3]/100,n[4]):pi.hasOwnProperty(t)?vi(pi[t]):"transparent"===t?new _i(NaN,NaN,NaN,0):null}function vi(t){return new _i(t>>16&255,t>>8&255,255&t,1)}function gi(t,n,e,r){return r<=0&&(t=n=e=NaN),new _i(t,n,e,r)}function mi(t){return t instanceof ni||(t=di(t)),t?new _i((t=t.rgb()).r,t.g,t.b,t.opacity):new _i}function yi(t,n,e,r){return 1===arguments.length?mi(t):new _i(t,n,e,null==r?1:r)}function _i(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function wi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bi(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new xi(t,n,e,r)}function xi(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ei(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Kr(ni,di,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Kr(_i,yi,ti(ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new _i(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+wi(this.r)+wi(this.g)+wi(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Kr(xi,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof xi)return new xi(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=di(t)),!t)return new xi;if(t instanceof xi)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,s=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=s<.5?o+i:2-o-i,u*=60):a=s>0&&s<1?0:u,new xi(u,a,s,t.opacity)}(t):new xi(t,n,e,null==r?1:r)},ti(ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new _i(Ei(t>=240?t-240:t+120,i,r),Ei(t,i,r),Ei(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ni=Math.PI/180,Si=180/Math.PI,ki=.96422,Ai=1,Mi=.82521,Pi=4/29,Ti=6/29,Oi=3*Ti*Ti,Ii=Ti*Ti*Ti;function Vi(t){if(t instanceof ji)return new ji(t.l,t.a,t.b,t.opacity);if(t instanceof Bi){if(isNaN(t.h))return new ji(t.l,0,0,t.opacity);var n=t.h*Ni;return new ji(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof _i||(t=mi(t));var e,r,i=Ri(t.r),o=Ri(t.g),u=Ri(t.b),a=Ci((.2225045*i+.7168786*o+.0606169*u)/Ai);return i===o&&o===u?e=r=a:(e=Ci((.4360747*i+.3850649*o+.1430804*u)/ki),r=Ci((.0139322*i+.0971045*o+.7141733*u)/Mi)),new ji(116*a-16,500*(e-a),200*(a-r),t.opacity)}function ji(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Ci(t){return t>Ii?Math.pow(t,1/3):t/Oi+Pi}function qi(t){return t>Ti?t*t*t:Oi*(t-Pi)}function Li(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ri(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bi(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}Kr(ji,function(t,n,e,r){return 1===arguments.length?Vi(t):new ji(t,n,e,null==r?1:r)},ti(ni,{brighter:function(t){return new ji(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ji(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new _i(Li(3.1338561*(n=ki*qi(n))-1.6168667*(t=Ai*qi(t))-.4906146*(e=Mi*qi(e))),Li(-.9787684*n+1.9161415*t+.033454*e),Li(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Kr(Bi,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Bi)return new Bi(t.h,t.c,t.l,t.opacity);if(t instanceof ji||(t=Vi(t)),0===t.a&&0===t.b)return new Bi(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Si;return new Bi(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Bi(t,n,e,null==r?1:r)},ti(ni,{brighter:function(t){return new Bi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Bi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Vi(this).rgb()}}));var zi=-.14861,Hi=1.78277,Di=-.29227,Xi=-.90649,$i=1.97294,Wi=$i*Xi,Fi=$i*Hi,Yi=Hi*Di-Xi*zi;function Ji(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ui(t){return function(){return t}}function Gi(t){return 1==(t=+t)?Qi:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Ui(isNaN(n)?e:n)}}function Qi(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):Ui(isNaN(t)?n:t)}Kr(Ji,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Ji)return new Ji(t.h,t.s,t.l,t.opacity);t instanceof _i||(t=mi(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Yi*r+Wi*n-Fi*e)/(Yi+Wi-Fi),o=r-i,u=($i*(e-i)-Di*o)/Xi,a=Math.sqrt(u*u+o*o)/($i*i*(1-i)),s=a?Math.atan2(u,o)*Si-120:NaN;return new Ji(s<0?s+360:s,a,i,t.opacity)}(t):new Ji(t,n,e,null==r?1:r)},ti(ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ji(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ji(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ni,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new _i(255*(n+e*(zi*r+Hi*i)),255*(n+e*(Di*r+Xi*i)),255*(n+e*($i*r)),this.opacity)}}));var Zi=function t(n){var e=Gi(n);function r(t,n){var r=e((t=yi(t)).r,(n=yi(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),u=Qi(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}return r.gamma=t,r}(1);function Ki(t,n){return n-=t=+t,function(e){return t+n*e}}var to=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(to.source,"g");var eo,ro,io,oo,uo=180/Math.PI,ao={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function so(t,n,e,r,i,o){var u,a,s;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,s/=a),t*r<n*e&&(t=-t,n=-n,s=-s,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*uo,skewX:Math.atan(s)*uo,scaleX:u,scaleY:a}}function lo(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,u){var a=[],s=[];return o=t(o),u=t(u),function(t,r,i,o,u,a){if(t!==i||r!==o){var s=u.push("translate(",null,n,null,e);a.push({i:s-4,x:Ki(t,i)},{i:s-2,x:Ki(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}(o.translateX,o.translateY,u.translateX,u.translateY,a,s),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:Ki(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,u.rotate,a,s),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:Ki(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,u.skewX,a,s),function(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:Ki(t,e)},{i:a-2,x:Ki(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,a,s),o=u=null,function(t){for(var n,e=-1,r=s.length;++e<r;)a[(n=s[e]).i]=n.x(t);return a.join("")}}}var co=lo(function(t){return"none"===t?ao:(eo||(eo=document.createElement("DIV"),ro=document.documentElement,io=document.defaultView),eo.style.transform=t,t=io.getComputedStyle(ro.appendChild(eo),null).getPropertyValue("transform"),ro.removeChild(eo),so(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),fo=lo(function(t){return null==t?ao:(oo||(oo=document.createElementNS("http://www.w3.org/2000/svg","g")),oo.setAttribute("transform",t),(t=oo.transform.baseVal.consolidate())?so((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ao)},", ",")",")");Math.SQRT2;function ho(t,n,e){var r=t._id;return t.each(function(){var t=Qr(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Zr(t,r).value[n]}}function po(t,n){var e;return("number"==typeof n?Ki:n instanceof di?Zi:(e=di(n))?(n=e,Zi):function(t,n){var e,r,i,o=to.lastIndex=no.lastIndex=0,u=-1,a=[],s=[];for(t+="",n+="";(e=to.exec(t))&&(r=no.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,s.push({i:u,x:Ki(e,r)})),o=no.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)a[(e=s[r]).i]=e.x(t);return a.join("")})})(t,n)}var vo=pr.prototype.constructor;function go(t){return function(){this.style.removeProperty(t)}}var mo=0;function yo(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function _o(){return++mo}var wo=pr.prototype;yo.prototype=function(t){return pr().transition(t)}.prototype={constructor:yo,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=je(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,s,l=r[u],c=l.length,f=o[u]=new Array(c),h=0;h<c;++h)(a=l[h])&&(s=t.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),f[h]=s,Ur(f[h],n,e,h,f,Zr(a,e)));return new yo(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=qe(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var s,l=r[a],c=l.length,f=0;f<c;++f)if(s=l[f]){for(var h,p=t.call(s,s.__data__,f,l),d=Zr(s,e),v=0,g=p.length;v<g;++v)(h=p[v])&&Ur(h,n,e,v,p,d);o.push(p),u.push(s)}return new yo(o,u,n,e)},filter:function(t){"function"!=typeof t&&(t=Le(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,s=r[i]=[],l=0;l<a;++l)(o=u[l])&&t.call(o,o.__data__,l,u)&&s.push(o);return new yo(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,l=n[a],c=e[a],f=l.length,h=u[a]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;a<r;++a)u[a]=n[a];return new yo(u,this._parents,this._name,this._id)},selection:function(){return new vo(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=_o(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],s=a.length,l=0;l<s;++l)if(u=a[l]){var c=Zr(u,n);Ur(u,t,e,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yo(r,this._parents,t,e)},call:wo.call,nodes:wo.nodes,node:wo.node,size:wo.size,empty:wo.empty,each:wo.each,on:function(t,n){var e=this._id;return arguments.length<2?Zr(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?Gr:Qr;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}(e,t,n))},attr:function(t,n){var e=Oe(t),r="transform"===e?fo:po;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var u,a,s=e(this);if(null!=s)return(u=this.getAttributeNS(t.space,t.local))===(a=s+"")?null:u===r&&a===i?o:(i=a,o=n(r=u,s));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var u,a,s=e(this);if(null!=s)return(u=this.getAttribute(t))===(a=s+"")?null:u===r&&a===i?o:(i=a,o=n(r=u,s));this.removeAttribute(t)}})(e,r,ho(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===o?null:u===r?i:i=n(r=u,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var u=this.getAttribute(t);return u===o?null:u===r?i:i=n(r=u,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=Oe(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?co:po;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=We(this,t),u=(this.style.removeProperty(t),We(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}(t,r)).on("end.style."+t,go(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var u=We(this,t),a=e(this),s=a+"";return null==a&&(this.style.removeProperty(t),s=a=We(this,t)),u===s?null:u===r&&s===i?o:(i=s,o=n(r=u,a))}}(t,r,ho(this,"style."+t,n))).each(function(t,n){var e,r,i,o,u="style."+n,a="end."+u;return function(){var s=Qr(this,t),l=s.on,c=null==s.value[u]?o||(o=go(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(a,i=c),s.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var u=We(this,t);return u===o?null:u===r?i:i=n(r=u,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ho(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Zr(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=Qr(this,t),o=i.tween;if(o!==e)for(var u=0,a=(r=e=o).length;u<a;++u)if(r[u].name===n){(r=r.slice()).splice(u,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Qr(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},s=0,l=i.length;s<l;++s)if(i[s].name===n){i[s]=a;break}s===l&&i.push(a)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Gr(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Gr(this,t).delay=n}})(n,t)):Zr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Qr(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Qr(this,t).duration=n}})(n,t)):Zr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Qr(this,t).ease=n}}(n,t)):Zr(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,u){var a={value:u},s={value:function(){0==--i&&o()}};e.each(function(){var e=Qr(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(a),n._.interrupt.push(a),n._.end.push(s)),e.on=n})})}};Math.PI,Math.PI;var bo={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function xo(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return bo.time=Ir(),bo;return e}function Eo(){var t=f(['\n        <div class="place-map__form">\n            <input\n                id="place-search"\n                class="place-map__search"\n                name="place"\n                type="text"\n                disabled\n            />\n        </div>\n        <div\n            class="place-map__state-modules place-map__state-modules--hidden"\n            id="places-list"\n        ></div>\n        <figure class="place-map">\n            ',"\n        </figure>\n    "]);return Eo=function(){return t},t}function No(){var t=f(['\n        <div class="media">\n            <button\n                class="button button--transparent button--icon media__close"\n                id="back-to-map"\n                @click=','\n            >\n                <i class="material-icons">\n                    close\n                </i>\n            </button>\n            <h3 class="media__title">','</h3>\n            <div class="media__body">\n                ',"\n            </div>\n        </div>\n    "]);return No=function(){return t},t}function So(){var t=f(['\n        <p>\n            This state is not available yet.\n            <a class="button" href="/request?place=','"\n                >Request&nbsp;it&nbsp;here.\n            </a>\n        </p>\n    ']);return So=function(){return t},t}function ko(){var t=f(['<path class="','"\n            d="','" @mouseover='," @click=","></path>"]);return ko=function(){return t},t}function Ao(){var t=f(['<svg viewBox="0 0 1280 600" style="width:100%; height:auto;">\n    <g id="states-group" @mouseleave=',">\n    ",'\n    <path fill="none" stroke="#fff" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" d="','"></path>\n    </g>\n  </svg>']);return Ao=function(){return t},t}pr.prototype.interrupt=function(t){return this.each(function(){!function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>$r&&e.state<Yr,e.state=Jr,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}}(this,t)})},pr.prototype.transition=function(t){var n,e;t instanceof yo?(n=t._id,t=t._name):(n=_o(),(e=bo).time=Ir(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],s=a.length,l=0;l<s;++l)(u=a[l])&&Ur(u,t,n,l,a,e||xo(u,n));return new yo(r,this._parents,t,n)};var Mo=["Alaska","Georgia","Pennsylvania","Vermont","Wisconsin","Massachusetts","Missouri","Mississippi","Illinois","Texas","New York","North Carolina","California"],Po={},To=!1;function Oo(t,n,e){!1===To&&(To=!0,n.properties.isAvailable&&(e.target.classList.add("state--selected"),function(t,n){var e=t.bounds(n),r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=(e[0][0]+e[1][0])/2,u=(e[0][1]+e[1][1])/2,a=.75/Math.max(r/1280,i/600),s=[320-a*o,300-a*u];dr("g").transition().duration(500).attr("transform","translate("+s+")scale("+a+")")}(t,n),vr(".state").classed("state--zoomed",!0),dr("#place-search").classed("hidden",!0),dr("#places-list").classed("place-map__state-modules--hidden",!1),$(function(t){var n=ke(t.properties.NAME,function(){return function(t){return W(So(),t.properties.NAME)}(t)});return W(No(),Io,t.properties.NAME,n.render())}(n),document.getElementById("places-list"))))}function Io(){To=!1,dr("g").transition().duration(500).attr("transform",""),vr(".state").classed("state--zoomed",!1).classed("state--selected",!1),dr("#place-search").classed("hidden",!1),dr("#places-list").classed("place-map__state-modules--hidden",!0),$("",document.getElementById("places-list"))}function Vo(t){if(!0!==To){var n=document.getElementById("place-search");if(t===Po)return n.classList.remove("place-map__search--unavailable"),n.classList.remove("place-map__search--available"),void(n.value="");n.value=t.properties.NAME,t.properties.isAvailable?(n.classList.remove("place-map__search--unavailable"),n.classList.add("place-map__search--available")):(n.classList.remove("place-map__search--available"),n.classList.add("place-map__search--unavailable"))}}function jo(t,n){var e=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),St(t,e(r))),r.result()}return o.area=function(t){return St(t,e(ln)),ln.result()},o.measure=function(t){return St(t,e(Un)),Un.result()},o.bounds=function(t){return St(t,e(yn)),yn.result()},o.centroid=function(t){return St(t,e(In)),In.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,nn):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new Zn):new Dn(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)}(ve().scale(1280).translate([640,300]));return F(Ao(),function(){return n(Po)},t.features.map(function(t){return F(ko(),t.properties.isAvailable?"state state--available":"state",e(t),function(){return n(t)},t.properties.isAvailable?function(n){return Oo(e,t,n)}:void 0)}),e(t))}function Co(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo;return fetch("./assets/simple_states.json").then(function(t){return t.json()}).then(function(n){for(var e=0;e<n.features.length;e++){var r=n.features[e];r.properties.isAvailable=t.includes(r.properties.NAME)}return n})}().then(function(t){return function(t){return W(Eo(),jo(t,Vo))}(t)})}function qo(){var t=f(['\n                    <a href="./signin" class="sign-in__link">Sign in</a>\n                    <a href="./register" class="button sign-in__link">\n                        Create your account</a\n                    >\n                ']);return qo=function(){return t},t}function Lo(){var t=f(['\n                    <p class="sign-in__link">Hello, ','!</p>\n                    <a href="./new" class="button sign-in__link"\n                        >Draw a new plan</a\n                    >\n                    <a href="./signout" class="button sign-in__link"\n                        >Sign out</a\n                    >\n                ']);return Lo=function(){return t},t}function Ro(){var t=f(['\n            <h2 class="start-districting__title section__heading">\n                Where would you like to redistrict?\n            </h2>\n            ',"\n        "]);return Ro=function(){return t},t}return function(){var t;t=document.getElementById("start-districting"),$(W(Ro(),K(Co(),"")),t),t.classList.remove("hidden"),U(J).then(function(t){history.replaceState({},document.title,window.location.href.split("?")[0]);var n=document.getElementById("sign-in");$(null!=t?W(Lo(),t.first):W(qo()),n)})}});
//# sourceMappingURL=index.js.map
