!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ieBundle=t()}(this,function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(n){t(e,n,r[n])})}return e}var r="https://api.districtr.org",i=new(function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null==e&&(e=r),this.base_url=e,null==n&&(n=[]),this.middleware=n}var i,u,o;return i=t,(u=[{key:"request",value:function(e,t,r,i){var u;return null!=r&&(u=JSON.stringify(r)),fetch(this.base_url+e,this.middleware.reduce(function(e,t){return t(e)},{method:t,body:u,headers:n({"Content-Type":"application/json"},i)}))}},{key:"get",value:function(e){return this.request(e,"GET")}},{key:"post",value:function(e,t){return this.request(e,"POST",t)}},{key:"put",value:function(e,t){return this.request(e,"PUT",t)}},{key:"delete",value:function(e,t){return this.request(e,"DELETE",t)}},{key:"patch",value:function(e,t){return this.request(e,"PATCH",t)}}])&&e(i.prototype,u),o&&e(i,o),t}())(r);function u(e){var t=e.message,n=e.raw,r=document.getElementById("popup-message");return r.classList.remove("hidden"),!0===n?r.innerHTML=t:r.innerText=t,r}function o(e){u({message:e}).classList.add("alert")}var a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var s={"/":"./","/new":"./new","/edit":"./edit","/register":"./register","/request":"./request","/signin":"./signin","/signout":"./signout"};var c={201:function(){document.getElementById("form").remove(),document.getElementById("email-message").innerText="Success! We sent you an email with a link to sign in.",window.setTimeout(function(){return function(e){if(!s.hasOwnProperty(e))throw Error("The requested route does not exist: "+e);location.assign(s[e])}("/")},2e3)},404:function(){u({message:'It looks like you haven\'t created your Districtr account yet. <a href="./register">Click here to create an account.</a>',raw:!0})},default:function(){o("We're sorry. Signing in is currently unavailable.")}};function l(e){(function(e){var t=e.email;return i.post("/signin/",{email:t})})({email:e.email.value}).then(function(e){return e=n({default:function(e){return console.error("Request failed",e)}},e),function(t){return e.hasOwnProperty(t.status)?e[t.status](t):e.default(t)}}(c)).catch(function(){o("We're having trouble accessing our sign-in service. Are you connected to the internet?")})}function f(e){var t=e.email,n=e.submit,r=t.value.match(a);return n.disabled=!r,r}return function(){!function(e,r,i,u){var o=e.reduce(function(e,r){return n({},e,t({},r,document.getElementById(r)))},{});e.forEach(function(e){var t,n;t=o[e],n=function(){return i(o)},t.onblur=n,t.onfocus=n,t.oninput=n}),document.getElementById(r).onsubmit=function(e){e.preventDefault(),i(o)&&u(o)}}(["email","submit"],"form",f,l)}});
//# sourceMappingURL=signin.js.map
