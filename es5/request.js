!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ieBundle=t()}(this,function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},u=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),u.forEach(function(n){t(e,n,r[n])})}return e}var r="https://api.districtr.org",u=new(function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null==e&&(e=r),this.base_url=e,null==n&&(n=[]),this.middleware=n}var u,i,o;return u=t,(i=[{key:"request",value:function(e,t,r,u){var i;return null!=r&&(i=JSON.stringify(r)),fetch(this.base_url+e,this.middleware.reduce(function(e,t){return t(e)},{method:t,body:i,headers:n({"Content-Type":"application/json"},u)}))}},{key:"get",value:function(e){return this.request(e,"GET")}},{key:"post",value:function(e,t){return this.request(e,"POST",t)}},{key:"put",value:function(e,t){return this.request(e,"PUT",t)}},{key:"delete",value:function(e,t){return this.request(e,"DELETE",t)}},{key:"patch",value:function(e,t){return this.request(e,"PATCH",t)}}])&&e(u.prototype,i),o&&e(u,o),t}())(r);function i(e){(function(e){var t=e.message,n=e.raw,r=document.getElementById("popup-message");return r.classList.remove("hidden"),!0===n?r.innerHTML=t:r.innerText=t,r})({message:e}).classList.add("alert")}var o=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var a={"/":"./","/new":"./new","/edit":"./edit","/register":"./register","/request":"./request","/signin":"./signin","/signout":"./signout"};function s(e){var t,r,o=e.first,s=e.last,l=e.email,c=e.place,f=e.organization,d=e.districtTypes,m=e.info;(r={user:{first:o.value,last:s.value,email:l.value,organization:f.value},name:c.value,districtTypes:d.value,information:m.value},u.post("/requests/",r)).then((t={201:function(){document.getElementById("form").remove();var e=document.getElementById("success-message");e.innerText="Success! You request has been submitted.",e.classList.remove("hidden"),window.setTimeout(function(){return function(e){if(!a.hasOwnProperty(e))throw Error("The requested route does not exist: "+e);location.assign(a[e])}("/")},2e3)},default:function(){i("We're sorry. An error occurred and we were unable to submit your request.")}},t=n({default:function(e){return console.error("Request failed",e)}},t),function(e){return t.hasOwnProperty(e.status)?t[e.status](e):t.default(e)})).catch(function(){i("We're having trouble submitting your request. Are you connected to the internet?")})}function l(e){var t=e.place,n=e.districtTypes,r=e.first,u=e.last,i=e.email,a=e.submit,s=t.value.length>0&&n.value.length>0&&r.value.length>0&&u.value.length>0&&i.value.length>0&&i.value.match(o);return a.disabled=!s,s}return function(){!function(e,r,u,i){var o=e.reduce(function(e,r){return n({},e,t({},r,document.getElementById(r)))},{});e.forEach(function(e){var t,n;t=o[e],n=function(){return u(o)},t.onblur=n,t.onfocus=n,t.oninput=n}),document.getElementById(r).onsubmit=function(e){e.preventDefault(),u(o)&&i(o)}}(["place","districtTypes","info","first","last","email","organization","submit"],"form",l,s)}});
//# sourceMappingURL=request.js.map
