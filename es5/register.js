!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ieBundle=t()}(this,function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(n){t(e,n,r[n])})}return e}var r="https://api.districtr.org",i=new(function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),null==e&&(e=r),this.base_url=e,null==n&&(n=[]),this.middleware=n}var i,u,o;return i=t,(u=[{key:"request",value:function(e,t,r,i){var u;return null!=r&&(u=JSON.stringify(r)),fetch(this.base_url+e,this.middleware.reduce(function(e,t){return t(e)},{method:t,body:u,headers:n({"Content-Type":"application/json"},i)}))}},{key:"get",value:function(e){return this.request(e,"GET")}},{key:"post",value:function(e,t){return this.request(e,"POST",t)}},{key:"put",value:function(e,t){return this.request(e,"PUT",t)}},{key:"delete",value:function(e,t){return this.request(e,"DELETE",t)}},{key:"patch",value:function(e,t){return this.request(e,"PATCH",t)}}])&&e(i.prototype,u),o&&e(i,o),t}())(r);function u(e){(function(e){var t=e.message,n=e.raw,r=document.getElementById("popup-message");return r.classList.remove("hidden"),!0===n?r.innerHTML=t:r.innerText=t,r})({message:e}).classList.add("alert")}var o=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;var a={"/":"./","/new":"./new","/edit":"./edit","/register":"./register","/request":"./request","/signin":"./signin","/signout":"./signout"};function s(e){var t,r=e.first,o=e.last,s=e.email;(function(e){var t=e.first,n=e.last,r=e.email;return i.post("/register/",{first:t,last:n,email:r})})({first:r.value,last:o.value,email:s.value}).then((t={201:function(){document.getElementById("form").remove(),document.getElementById("email-message").innerText="Success! We sent you an email with a link to sign in.",window.setTimeout(function(){return function(e){if(!a.hasOwnProperty(e))throw Error("The requested route does not exist: "+e);location.assign(a[e])}("/")},2e3)},default:function(){u("We're sorry. Registration is currently unavailable.")}},t=n({default:function(e){return console.error("Request failed",e)}},t),function(e){return t.hasOwnProperty(e.status)?t[e.status](e):t.default(e)})).catch(function(){u("We're having trouble accessing our registration service. Are you connected to the internet?")})}function l(e){var t=e.first,n=e.last,r=e.email,i=e.submit,u=t.value.length>0&&n.value.length>0&&r.value.length>0&&r.value.match(o);return i.disabled=!u,u}return function(){!function(e,r,i,u){var o=e.reduce(function(e,r){return n({},e,t({},r,document.getElementById(r)))},{});e.forEach(function(e){var t,n;t=o[e],n=function(){return i(o)},t.onblur=n,t.onfocus=n,t.oninput=n}),document.getElementById(r).onsubmit=function(e){e.preventDefault(),i(o)&&u(o)}}(["first","last","email","submit"],"form",l,s)}});
//# sourceMappingURL=register.js.map
